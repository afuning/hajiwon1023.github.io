---
title: 浅谈HTTP原理
date: 2018-12-07 16:40:21
tags: HTTP
---
<!--toc-->
辅导费
## HTTP到底是什么

缩&#160;&#160;写：**HTTP**  
英文名：**HyperText Transfer Protocol** *（又称Hypertext Transfer Protocol）*   
中文名：**超文本传输协议**  
角&#160;&#160;色：**万维网的数据通信基础**  
位&#160;&#160;置：**7层OSI模型的应用层[^1]**

### 又称：因特网的多媒体信使

提问：*众所周知信使是用来送信的，那么，HTTP送的是什么*

> 客户端发送**HTTP请求**给服务器，服务器发送**HTTP响应**给客户端。一个请求和一个响应称为一个**HTTP事务**，其中带有的资源[^2]、URI[^3]相当于快递员送的包裹以及包裹地址  

提问：*HTTP所送的包裹是怎么样的呢？*

> **HTTP事务**是通过名为HTTP报文的格式化数据块进行的。既然HTTP是英特网的信使，那么**报文**就是他用来搬东西的包裹。

提问：*既然报文是包裹，那么其组成部分怎么样的？*
> 首先**HTTP报文**是简单的格式化数据块。每条报文由三部分组成：对报文进行描述的**起始行**、包含属性的**部首块**、可选的、包含数据的**主体**部分。

如图所示为两类HTTP报文：
![两类HTTP报文](http://www.nomiwan.com/HTTP%E6%8A%A5%E6%96%87.jpg)

1. 请求行包含一个方法，一个请求URL以及版本（1.0前不需要版本
2. 响应行包含版本、数字状态吗、以及原因短语  
3. 可选的实体主体是报文的负荷，要传输的内容。
4. 首部从本质来说只是一些名/值对的列表。其中可分为以下几类：

* 通用首部：存在两类报文中
* 请求首部
* 响应首部
* 实体首部：描述主体的长度和内容，或者资源自身
* 拓展首部：规范中未定义的新首部

----

## HTTP演变过程

### 起源

是由蒂姆·伯纳斯-李于1989年在欧洲核子研究组织（CERN）所发起，标准制定由万维网协会（World Wide Web Consortium，W3C）和互联网工程任务组（Internet Engineering Task Force，IETF）进行协调，最终发布了一系列的RFC。

### 版本演化

|时间|    版本    |       特性       |      改进     |     缺陷     |
|:--:|:-------:|:------------- |:---------- |:---------- |
|1990|   HTTP/0.9  |只接受GET一种请求方法，没有在通讯中指定版本号，且不支持请求头。|     |  功能单一，由于不支持POST客户端无法向服务器传递太多信息  |
|1996|   HTTP/1.0  |第一个在通讯中指定版本号的HTTP协议版本，至今仍被广泛采用，特别是在代理服务器中。|任何格式的内容都可以发送。可以**传输文字，图像、视频、二进制文件**。还引入了**POST和HEAD**。HTTP请求和回应的格式必须包括**头信息（HTTP header）**新增还包括**状态码（status code）、多字符集支持、多部分发送（multi-part type）、权限（authorization）、缓存（cache）、内容编码（content encoding）等**|规定浏览器与服务器**只保持短暂的连接**，浏览器的每次请求都需要与服务器建立一个TCP连接。为此引入**keep-alive**连接，默认关闭，需主动打开。|
|1997|HTTP/1.1|当前广泛使用版本|*引入**持久连接**，默认情况激活。**管道化连接**，将多条请求放入队列。新增动词：**PUT、PATCH、HEAD、 OPTIONS、DELETE**|同一个TCP连接里面，所有的数据通信是按次序进行的。服务器只有处理完一个回应，才会进行下一个回应。要是前面的回应特别慢，后面就会有许多请求排队等着。这称为**”队头堵塞”**|
|2015|HTTP/2.0|关注性能大幅提升|对HTTP头字段进行**数据压缩(即HPACK算法)**。新增**服务端推送(Server Push)**，即接收到客户端主请求，能够“预测”主请求的依赖资源，在响应主请求的同时，主动并发推送依赖资源至客户端。请求**管线化**|从 HTTP/1.1 转向 HTTP/2 势必是漫长的，升级容易，但只要绝大多数人使用老旧浏览器，则会很麻烦|

## HTTP是如何工作的

dfdfdfdf

### HTTP连接

'l;lg;fl;g

### HTTP架构

f.,g.f,g.fg

## HTTP应用

fglfkglfkg

## HTTP的未来

[^1]: 如图：![7层OSI模型的应用层](http://www.nomiwan.com/7%E5%B1%82OSI%E6%A8%A1%E5%9E%8B.jpg) 

[^2]: 有静态文件，也有**动态内容。静态资源**包括*文本文件、HTML文件、Word文件、图片文件、视频文件*等。动态内容即是根据身份、所求信息、不同时段产生不同内容。并通过**MIME**来描述并标记媒体内容例如：```Content-type: image/jpeg```

[^3]: 称为统一资源标识符（Uniform Resource Identifier），有两种形式分别称为**URL（统一资源定位符）**和**URN（统一资源名）**。URL由三部分组成`*协议类型*（http://）、*服务器的英特网地址*（www.google.com）、*服务器上的某个资源*（/images/example.jpg）`例如：<http://www.google.com/images/example.jpg>
